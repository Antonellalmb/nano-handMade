<!DOCTYPE html>
<html lang="en">
  <%- include('../partials/head') %>
<body>
    <!-- Preload the Whole Page -->
    <div id="preloader">      
    <div id="loading-animation">&nbsp;</div>
    </div>

    <!-- Navbar -->
    <%- include('../partials/header') %>
    <!-- End Navbar -->

    <!-- Main del formulario de edición de Producto -->
    <main class="mainInput">
        <div class="tableInput">
            <form class="tables" action="/product/product/update/<%= productItem.id %>?_method=PUT" method="post" >
                <h4>Editar Produto</h4> 
                <div>
                    <% //console.log(productItem)%>
                    <input type="hidden" name="productId" value="<%= productItem.id%>">
                    <input class="form-tablas" type="text" name="productName" value="<%= productItem.name%>"> 
                    <textarea class="form-tablas textarea-tablas" name="detail"><%= productItem.description%></textarea>
                    <div>
                        <div class="inputsNumber">
                            <!-- Select para elegir si el producto lleva descuento o no -->
                            <p class="optionsSelect">Coleção</p>
                            <select class="form-tablas" name="collectionSelected" id="collectionTable">
                                <option required>- Coleção -</option>
                                    <!-- Se buscan los valores que completarán las opciones del select en la tabla de colecciones que recibe del controller-->
                                    <% collections.forEach(collection => { %>
                                    <option value="<%= collection.id %>" <% if (collection.id == productItem.collection_id) {%> selected <% } %>><%= collection.name %>
                                     </option>
                                    <% }); %>
                            </select>
                            <!-- End Select-->
                        </div>
    
                        <div class="inputsNumber">
                            <!-- Select para elegir si el producto lleva descuento o no -->
                            <p class="optionsSelect">Desconto</p>
                            <select class="form-tablas" type="number" name="discountSelectedItem" id="discountTable">
                                <option value="" required>- Desconto - </option>
                                    <!-- Se buscan los valores que completarán las opciones del select en la tabla de descuentos que recibe del controller-->
                                    <% discounts.forEach(discount => { %>
                                    <option value="<%= discount.id %>" <% if (discount.id == productItem.discount_id) {%> selected <% } %>><%= discount.discount_code %></option>
                                    <% }); %>
                            </select>
                            <!-- End Select-->
                        </div>
                    </div>
                    <div class="separator">
                        <p></p>
                    </div>

                    
                    <table class="tableProducto">
                        <tr>
                            <th class="columnNumber">It</th>
                            <th class="columnPrize  input-tablas-prize">Preço</th>
                            <th class="columnColor">Cor</th>
                            <th class="columnSize">Tamanho</th>
                            <th class="column Stock input-tablas-stock">Etoque</th>
                            <th class="columnDiscount">Desconto</th>
                            <th class="columnDetail">Detalhes</th>
                        </tr>
                        <% //console.log(productItem.Characteristics[0]) %>
                        <% for(i = 1 ; i <= productItem.Characteristics.length ; i++) {%>
                            <tr>
                                <td class="columnNumber"><%= i%></td>
                                <td class="columnPrize">
                                    <input class="form-tablas input-tablas-prize" type="number" name="productPrice" value="<%= productItem.Characteristics[i-1].price%>" placeholder="   Preço do produto">
                                </td>
                                <td class="columnColor"><select class="form-tablas" type="number" name="colorSelected" id="colorTable">
                                    <option value="" required>Cor</option>
                                        <!-- Se buscan los valores que completarán las opciones del select en la tabla de colores que recibe del controller-->
                                        <% colors.forEach(color => { %>
                                        <option value="<%= color.id %>" <% if (color.id == productItem.Characteristics[i-1].color_id) {%> selected <% } %>><%= color.name %></option>
                                        <% }); %>
                                </select></td>
                                <td class="columnSize"><select class="form-tablas" type="number" name="sizeSelected" id="sizeTable">
                                    <option value="" required>Tamanho</option>
                                        <!-- Se buscan los valores que completarán las opciones del select en la tabla de tamaños que recibe del controller-->
                                        <% sizes.forEach(size => { %>
                                        <option value="<%= size.id %>" <% if (size.id == productItem.Characteristics[i-1].size_id) {%> selected <% } %>><%= size.name %></option>
                                        <% }); %>
                                </select></td>
                                <td class="columnStock">
                                    <input class="form-tablas input-tablas-stock" type="number" name="productStock" value="<%= productItem.Characteristics[i-1].stock%>" placeholder="   Etoque de produtos">
                                </td>
                                <td class="columnDiscount"><select class="form-tablas" type="number" name="discountSelected" id="discountTable">
                                    <option value="" required>Desconto</option>
                                        <!-- Se buscan los valores que completarán las opciones del select en la tabla de descuentos que recibe del controller-->
                                        <% discounts.forEach(discount => { %>
                                        <option value="<%= discount.id %>" <% if (discount.id == productItem.Characteristics[i-1].discount_id) {%> selected <% } %>><%= discount.discount_code %></option>
                                        <% }); %>
                                </select></td>
                                <td class="columnDetail">
                                    <textarea id="textareaTabla" class="form-tablas textarea-tablas" name="productDetail" placeholder="detalhes do produto"><%= productItem.Characteristics[i-1].details%></textarea>
                                </td>
                            </tr>
                        <%}%>
                        <tr>
                            <td class="columnNumber"><%= i%></td>
                            <td class="columnPrize">
                                <input class="form-tablas input-tablas-prize" type="number" name="productPrice" placeholder="   Preço do produto">
                            </td>
                            <td class="columnColor"><select class="form-tablas" type="number" name="colorSelected" id="colorTable">
                                <option value="" required>Cor</option>
                                    <!-- Se buscan los valores que completarán las opciones del select en la tabla de colores que recibe del controller-->
                                    <% colors.forEach(color => { %>
                                    <option value="<%= color.id %>"><%= color.name %></option>
                                    <% }); %>
                            </select></td>
                            <td class="columnSize"><select class="form-tablas" type="number" name="sizeSelected" id="sizeTable">
                                <option value="" required>Tamanho</option>
                                    <!-- Se buscan los valores que completarán las opciones del select en la tabla de tamaños que recibe del controller-->
                                    <% sizes.forEach(size => { %>
                                    <option value="<%= size.id %>"><%= size.name %></option>
                                    <% }); %>
                            </select></td>
                            <td class="columnStock">
                                <input class="form-tablas input-tablas-stock" type="number" name="productStock" placeholder="   Etoque de produtos">
                            </td>
                            <td class="columnDiscount"><select class="form-tablas" type="number" name="discountSelected" id="discountTable">
                                <option value="" required>Desconto</option>
                                    <!-- Se buscan los valores que completarán las opciones del select en la tabla de descuentos que recibe del controller-->
                                    <% discounts.forEach(discount => { %>
                                    <option value="<%= discount.id %>"><%= discount.discount_code %></option>
                                    <% }); %>
                            </select></td>
                            <td class="columnDetail">
                                <textarea id="textareaTabla" class="form-tablas textarea-tablas" name="productDetail" placeholder="detalhes do produto"></textarea>
                            </td>
                        </tr>
            
                    </table>
                    
                    
                <div class="button-div"> 
                    <a href="#"> <button class="botEnterTablas tablasBoton" type="submit">Modificar Produto</button> </a>
                    <a class="linkEditar" href="/product/productItemsTable"> <button class="botEnterTablas" type="button">Ir a Tabela de Produtos</button>  </a>
                </div>
        </form>
    </div>
        
    </main>
    <!-- End main -->
     
     <!-- Footer
    ================================================== -->
    <%- include('../partials/footer') %> 
    <!-- End footer -->
     <!-- JS libraries and scripts -->
  <script src="/js/jquery-1.11.3.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <script src="/js/bootstrap-hover-dropdown.min.js"></script>
  <script src="/js/jquery.appear.min.js"></script>
  <script src="/js/jquery.bxslider.min.js"></script>
  <script src="/js/jquery.owl.carousel.min.js"></script>
  <script src="/js/jquery.countTo.js"></script>
  <script src="/js/jquery.easing.1.3.js"></script>
  <script src="/js/jquery.imagesloaded.min.js"></script>
  <script src="/js/jquery.isotope.js"></script>
  <script src="/js/jquery.placeholder.js"></script>
  <script src="/js/jquery.smoothscroll.js"></script>
  <script src="/js/jquery.stellar.min.js"></script>
  <script src="/js/jquery.waypoints.js"></script>
  <script src="/js/jquery.fitvids.js"></script>
  <script src="/js/jquery.magnific-popup.min.js"></script>
  <script src="/js/jquery.ajaxchimp.min.js"></script>
  <script src="/js/jquery.countdown.js"></script>
  <script src="/js/jquery.navbar-scroll.js"></script>
  <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
  <script src="/js/jquery.gmaps.js"></script>
  <script src="/js/main.js"></script>   
</body>
</html>